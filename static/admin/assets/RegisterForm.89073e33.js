var x=(y,i,d)=>new Promise((o,p)=>{var g=l=>{try{c(d.next(l))}catch(u){p(u)}},v=l=>{try{c(d.throw(l))}catch(u){p(u)}},c=l=>l.done?o(l.value):Promise.resolve(l.value).then(g,v);c((d=d.apply(y,i)).next())});import{u as I,a as P,b as C,L as U,_ as B}from"./LoginFormTitle.389d220c.js";import{b as L,f as T,h as M}from"./index.a544321c.js";/* empty css               *//* empty css               */import{S as N}from"./index.03b81760.js";import{d as V,k as h,r as D,e as $,u as e,$ as G,a0 as Y,f as s,a8 as n,E as k,a2 as S,F as j,ab as q}from"./vue.5d40fadb.js";import{ad as _,Y as f,a8 as F}from"./ui.83c3e48a.js";import"./utils.79519c03.js";const ee=V({__name:"RegisterForm",setup(y){const i=_.Item,d=f.Password,{t:o}=L(),{notification:p,createErrorModal:g}=M(),{handleBackLogin:v,getLoginState:c}=I(),l=T(),u=h(),w=h(!1),t=D({name:"",code:"",pwd:"",phone:"",confirmPassword:""}),{getFormRules:b}=P(t),{validForm:R}=C(u),z=$(()=>e(c)===U.REGISTER);function E(){return x(this,null,function*(){const m=yield R();if(!!m)try{w.value=!0,yield l.register({name:m.name,code:m.code,phone:m.phone,pwd:m.pwd,status:1,mode:"none",login_time:""});const a=e(u);if(!a)return;yield a.resetFields(),p.success({message:o("sys.login.registerSuccessTitle"),duration:3})}catch(a){g({title:o("sys.api.errorTip"),content:a.message||o("sys.api.networkExceptionMsg")})}finally{w.value=!1}})}return(m,a)=>z.value?(G(),Y(j,{key:0},[s(B,{class:"enter-x"}),s(e(_),{class:"p-4 enter-x",model:t,rules:e(b),ref_key:"formRef",ref:u},{default:n(()=>[s(e(i),{name:"name",class:"enter-x"},{default:n(()=>[s(e(f),{class:"fix-auto-fill",size:"large",value:t.name,"onUpdate:value":a[0]||(a[0]=r=>t.name=r),placeholder:e(o)("sys.login.name")},null,8,["value","placeholder"])]),_:1}),s(e(i),{name:"code",class:"enter-x"},{default:n(()=>[s(e(f),{class:"fix-auto-fill",size:"large",value:t.code,"onUpdate:value":a[1]||(a[1]=r=>t.code=r),placeholder:e(o)("sys.login.userName")},null,8,["value","placeholder"])]),_:1}),s(e(i),{name:"phone",class:"enter-x"},{default:n(()=>[s(e(f),{size:"large",value:t.phone,"onUpdate:value":a[2]||(a[2]=r=>t.phone=r),placeholder:e(o)("sys.login.mobile"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(i),{name:"pwd",class:"enter-x"},{default:n(()=>[s(e(N),{size:"large",value:t.pwd,"onUpdate:value":a[3]||(a[3]=r=>t.pwd=r),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(i),{name:"confirmPassword",class:"enter-x"},{default:n(()=>[s(e(d),{size:"large",visibilityToggle:"",value:t.confirmPassword,"onUpdate:value":a[4]||(a[4]=r=>t.confirmPassword=r),placeholder:e(o)("sys.login.confirmPassword")},null,8,["value","placeholder"])]),_:1}),s(e(F),{type:"primary",class:"enter-x",size:"large",block:"",onClick:E,loading:w.value},{default:n(()=>[k(S(e(o)("sys.login.registerButton")),1)]),_:1},8,["loading"]),s(e(F),{size:"large",block:"",class:"mt-4 enter-x",onClick:e(v)},{default:n(()=>[k(S(e(o)("sys.login.backSignIn")),1)]),_:1},8,["onClick"])]),_:1},8,["model","rules"])],64)):q("",!0)}});export{ee as default};
