var W=Object.defineProperty,$=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var w=(t,a,e)=>a in t?W(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,_=(t,a)=>{for(var e in a||(a={}))J.call(a,e)&&w(t,e,a[e]);if(S)for(var e of S(a))K.call(a,e)&&w(t,e,a[e]);return t},A=(t,a)=>$(t,H(a));var x=(t,a,e)=>new Promise((v,g)=>{var n=i=>{try{d(e.next(i))}catch(f){g(f)}},o=i=>{try{d(e.throw(i))}catch(f){g(f)}},d=i=>i.done?v(i.value):Promise.resolve(i.value).then(n,o);d((e=e.apply(t,a)).next())});import{b as Q,h as U}from"./index.f8dcff9b.js";import{b as X,B as Y}from"./index.3d9df1da.js";import{j as Z,B as ee}from"./useForm.8bc02932.js";import{c as ae,s as te}from"./index.2a183fc3.js";import{i as oe}from"./index.9d843d40.js";import{d as se,k as h,a1 as B,a7 as re,a9 as k,f as I,u,E as R,a4 as r,a2 as T,a3 as c,V as E,a8 as ne}from"./vue.2e68d871.js";import{a8 as ie}from"./ui.3c499a62.js";import"./utils.b124f726.js";import"./table.68230543.js";import"./useWindowSizeFn.7b554b6f.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.8e12a0dc.js";import"./download.1a473a50.js";import"./index.e09f6ddc.js";const le={key:0},de={style:{"margin-bottom":"12px","font-size":"12px",color:"var(--text-color-secondary, #666)"}},ce={key:0,style:{"margin-left":"8px"}},me={style:{display:"grid","grid-template-columns":"repeat(3, minmax(0, 1fr))",gap:"8px","margin-bottom":"12px"}},Re=se({__name:"DevParam",emits:["success","register"],setup(t,{emit:a}){const{t:e}=Q(),{createMessage:v}=U(),g=a,n=h({}),o=h(null),d=h(""),i=[{field:"cmd",label:e("routes.dashboard.dash.paramCmd"),component:"InputNumber",required:!0,componentProps:()=>({min:2,max:1e3,precision:0})},{field:"val",label:e("routes.dashboard.dash.paramVal"),component:"InputNumber",required:!0,componentProps:()=>({min:0,max:65535,precision:0})}],[f,{setFieldsValue:C,resetFields:L,validate:q,getFieldsValue:D}]=Z({labelWidth:120,baseColProps:{span:24},schemas:i,showActionButtonGroup:!1,actionColOptions:{span:23}}),[O,{setModalProps:y,closeModal:j}]=X(s=>x(this,null,function*(){n.value=s.record,L(),y({confirmLoading:!1,title:e("routes.dashboard.dash.setting")+" - "+n.value.name}),C(_({},s.record));try{const m=yield oe({id:n.value.id}),p=(m==null?void 0:m.base)||{},l=(p==null?void 0:p.history)||{};o.value=(l==null?void 0:l.content)||null,d.value=(l==null?void 0:l.created)||""}catch(m){o.value=null,d.value=""}})),b=h(!1);function z(){const s=D();if(!s.cmd){v.error(e("routes.dashboard.dash.syncCmdError"));return}b.value=!0,ae({id:n.value.id,cmd:s.cmd,mode:"syn"}).then(()=>{setTimeout(()=>{te({id:n.value.id,addr:s.cmd}).then(m=>{C({val:m.val}),v.success(e("routes.dashboard.dash.syncSuccess"))})},1500)}),setTimeout(()=>{b.value=!1},2e3)}function G(){return x(this,null,function*(){try{const s=yield q();y({confirmLoading:!0}),j(),g("success",{values:A(_({},s),{id:n.value.id})})}finally{y({confirmLoading:!1})}})}return(s,m)=>(B(),re(u(Y),ne(s.$attrs,{onRegister:u(O),onOk:G}),{centerFooter:k(()=>[I(u(ie),{loading:b.value,onClick:z},{default:k(()=>[R(r(u(e)("sys.util.syncParam")),1)]),_:1},8,["loading"])]),default:k(()=>{var p,l,F,V,M,P,N;return[o.value?(B(),T("div",le,[c("div",de,[R(r(u(e)("routes.dashboard.dash.setting"))+" - "+r((p=n.value)==null?void 0:p.name)+" ",1),d.value?(B(),T("span",ce,"( "+r(d.value)+" )",1)):E("",!0)]),c("div",me,[c("div",null,"mode: "+r((l=o.value.mode)!=null?l:"-"),1),c("div",null,"f01: "+r((F=o.value.f01)!=null?F:"-"),1),c("div",null,"f02: "+r((V=o.value.f02)!=null?V:"-"),1),c("div",null,"f03: "+r((M=o.value.f03)!=null?M:"-"),1),c("div",null,"f04: "+r((P=o.value.f04)!=null?P:"-"),1),c("div",null,"f05: "+r((N=o.value.f05)!=null?N:"-"),1)])])):E("",!0),I(u(ee),{onRegister:u(f)},null,8,["onRegister"])]}),_:1},16,["onRegister"]))}});export{Re as default};
