import{b as F}from"./index.a544321c.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import{u as b}from"./useECharts.22ccf039.js";import{m as n}from"./data.df31ba91.js";import{aA as E,ax as D}from"./ui.83c3e48a.js";import{d as _,k as g,o as B,q as l,w as p,$ as w,a0 as N,f,a8 as y,u,a1 as x}from"./vue.5d40fadb.js";import"./utils.79519c03.js";import"./charts.ac429643.js";const O={class:"pt-4"},T={class:"h-72"},Z=_({__name:"BarChart",setup(R){const{t:e}=F(),t=g("month"),v=[{label:e("routes.dashboard.dash.month"),value:"month"},{label:e("routes.dashboard.dash.year"),value:"year"}],i=g(null),{setOptions:C}=b(i);function s(){var c,h,m;console.log("BarChart init called, flag:",t.value),console.log("monitorData.value:",n.value);const a=n.value[t.value];if(console.log("Current data:",a),console.log("Data keys:",a?Object.keys(a):"no data"),console.log("Data values:",a?{x:(c=a.x)==null?void 0:c.length,ok:(h=a.ok)==null?void 0:h.length,ng:(m=a.ng)==null?void 0:m.length}:"no data"),!a||!a.ok||!a.ng||!a.x){console.warn("BarChart: \u6570\u636E\u672A\u51C6\u5907\u597D\uFF0C\u8DF3\u8FC7\u6E32\u67D3",{d:a,flag:t.value});return}if(!Array.isArray(a.ok)||!Array.isArray(a.ng)||!Array.isArray(a.x)){console.warn("BarChart: \u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u8DF3\u8FC7\u6E32\u67D3",{ok:Array.isArray(a.ok),ng:Array.isArray(a.ng),x:Array.isArray(a.x)});return}console.log("\u5F00\u59CB\u6E32\u67D3ECharts\uFF0C\u6570\u636E\u957F\u5EA6:",a.x.length);const o=e("routes.dashboard.dash.chartOk"),r=e("routes.dashboard.dash.chartNg");let k={data:[o,r],selected:{[o]:!0,[r]:!0}},A=[{name:o,type:"bar",data:a.ok},{name:r,type:"bar",data:a.ng}];const d={tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,8]},dataZoom:{show:!0},grid:{left:10,right:10,bottom:10,containLabel:!0},xAxis:{data:a.x,axisTick:{show:!1}},yAxis:{axisTick:{show:!1}},legend:k,series:A};console.log("ECharts options:",d),C(d)}return B(()=>{console.log("BarChart mounted"),setTimeout(()=>{l(()=>{s()})},1e3)}),p(()=>t.value,()=>{console.log("Flag changed to:",t.value),l(()=>{s()})},{immediate:!0}),p(()=>n.value,a=>{console.log("MonitorData changed:",a),l(()=>{s()})},{deep:!0}),(a,o)=>(w(),N("div",O,[f(u(D),{title:u(e)("routes.dashboard.dash.dataStatis"),size:"small"},{extra:y(()=>[f(u(E),{value:t.value,"onUpdate:value":o[0]||(o[0]=r=>t.value=r),size:"small","option-type":"button",options:v},null,8,["value"])]),default:y(()=>[x("div",T,[x("div",{ref_key:"chartRef",ref:i,style:{height:"100%",width:"100%"}},null,512)])]),_:1},8,["title"])]))}});export{Z as default};
