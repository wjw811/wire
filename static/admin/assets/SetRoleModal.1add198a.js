var C=Object.defineProperty,S=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(t,o,e)=>o in t?C(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))L.call(o,e)&&w(t,e,o[e]);if(v)for(var e of v(o))P.call(o,e)&&w(t,e,o[e]);return t},M=(t,o)=>S(t,k(o));var g=(t,o,e)=>new Promise((p,i)=>{var n=s=>{try{c(e.next(s))}catch(m){i(m)}},u=s=>{try{c(e.throw(s))}catch(m){i(m)}},c=s=>s.done?p(s.value):Promise.resolve(s.value).then(n,u);c((e=e.apply(t,o)).next())});import{b as I,B as j}from"./index.3d9df1da.js";import{j as x,B as O}from"./useForm.8bc02932.js";import{b as V,h as G}from"./index.f8dcff9b.js";import{h as N,i as T,j as W}from"./index.data.d3422805.js";import{d as $,k as _,a1 as q,a7 as z,a9 as D,f as E,u as r,a8 as H}from"./vue.2e68d871.js";import"./ui.3c499a62.js";import"./useWindowSizeFn.7b554b6f.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.8e12a0dc.js";import"./download.1a473a50.js";import"./index.e09f6ddc.js";import"./utils.b124f726.js";import"./table.68230543.js";const fe=$({__name:"SetRoleModal",emits:["success","register"],setup(t,{emit:o}){const{t:e}=V(),p=o,i=_(""),n=_(""),[u,{setFieldsValue:c,resetFields:s,updateSchema:m,validate:b}]=x({labelWidth:100,baseColProps:{span:24},schemas:W,showActionButtonGroup:!1,actionColOptions:{span:23}}),[B,{setModalProps:d,closeModal:R}]=I(a=>g(this,null,function*(){s(),d({confirmLoading:!1,width:1e3}),i.value=a.record.id,n.value=a.record.code;const l=yield N({code:n.value}),F=l.data;a.record.data=l.have;let A=F.map(h=>({label:h.name,value:h.code}));m({field:"data",componentProps:{options:A}}),c(f({},a.record))}));function y(){return g(this,null,function*(){try{const a=yield b(),{createMessage:l}=G();d({confirmLoading:!0}),yield T({user:r(n),data:a.data}),l.success(e("system.account.tab.roleSuccess")),R(),p("success",{values:M(f({},a),{id:i.value})})}finally{d({confirmLoading:!1})}})}return(a,l)=>(q(),z(r(j),H(a.$attrs,{onRegister:r(B),title:r(e)("system.account.role"),onOk:y}),{default:D(()=>[E(r(O),{onRegister:r(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{fe as default};
