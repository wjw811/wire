var g=(h,r,i)=>new Promise((s,u)=>{var m=o=>{try{a(i.next(o))}catch(n){u(n)}},f=o=>{try{a(i.throw(o))}catch(n){u(n)}},a=o=>o.done?s(o.value):Promise.resolve(o.value).then(m,f);a((i=i.apply(h,r)).next())});import{_ as T,b as B,r as F,h as P}from"./index.f8dcff9b.js";import{u as M,B as V}from"./useTable.0365df15.js";import{T as A}from"./useForm.8bc02932.js";import{g as E,d as N}from"./index.9d843d40.js";import{a as U}from"./index.c762d615.js";import{u as q}from"./index.3d9df1da.js";import{u as H}from"./index.a39401d5.js";import{k as K}from"./data.1ea74f5c.js";import W from"./form.6bcdf5d7.js";import j from"./info.f2c434e6.js";import{c as L,a as O,s as c}from"./index.data.e4bafa43.js";import{d as $,aj as z,K as G,U as J,a1 as y,a7 as C,a9 as l,f as d,u as e,a3 as Q,E as X,a4 as Y,V as Z}from"./vue.2e68d871.js";import{ar as ee}from"./ui.3c499a62.js";import"./utils.b124f726.js";import"./table.68230543.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./useWindowSizeFn.7b554b6f.js";/* empty css               */import"./sortable.esm.e8ee5a53.js";/* empty css               *//* empty css               *//* empty css               */import"./index.8e12a0dc.js";import"./download.1a473a50.js";import"./index.e09f6ddc.js";/* empty css                *//* empty css                */import"./useContentViewHeight.31b45b6e.js";/* empty css                *//* empty css                */import"./index.93c8456d.js";import"./index.2a183fc3.js";import"./chart.9019d13e.js";import"./useECharts.b9c82683.js";import"./charts.e5d90eae.js";import"./gateway.68a1dc2f.js";const te=$({__name:"index",setup(h){const{t:r}=B(),{createMessage:i}=P(),{hasPermission:s}=F(),[u,{openModal:m}]=q(),[f,{reload:a}]=M({title:" ",api:E,rowKey:"id",columns:L,formConfig:{labelWidth:90,schemas:O,autoSubmitOnEnter:!0,resetFunc:()=>g(this,null,function*(){return c.state=null,Promise.resolve()})},useSearchForm:!0,showTableSetting:!0,bordered:!0,handleSearchInfoFn(t){return t},actionColumn:{width:120,title:r("sys.util.action"),dataIndex:"action"}}),o=z();G(()=>{if(a(),o.query.openDeviceId){const t=parseInt(o.query.openDeviceId),p=o.query.openParam==="true";setTimeout(()=>{b(!0,{record:{id:t},openParam:p})},500)}});const n=K.devState.map(t=>({label:t.v,value:t.k}));function I(){m(!0,{isUpdate:!1})}function S(t){m(!0,{record:t,isUpdate:!0})}function w(t){N(t).then(()=>{i.success(r("sys.util.deleteSuccess"))}).finally(()=>{a()})}const[x,{openDrawer:b}]=H();function k(t){b(!0,{record:t})}function D(){a()}return(t,p)=>{const R=J("a-button");return y(),C(e(U),{dense:"",contentFullHeight:"",fixedHeight:""},{default:l(()=>[d(e(V),{onRegister:e(f),class:"w-full",searchInfo:e(c)},{"form-state":l(()=>[Q("div",null,[d(e(ee),{value:e(c).state,"onUpdate:value":p[0]||(p[0]=_=>e(c).state=_),style:{width:"120px"},placeholder:"\u8BF7\u9009\u62E9",allowClear:"",options:e(n)},null,8,["value","options"])])]),toolbar:l(()=>[d(R,{type:"primary",onClick:I,disabled:!e(s)(["dev","add"])},{default:l(()=>[X(Y(e(r)("sys.util.add")),1)]),_:1},8,["disabled"])]),bodyCell:l(({column:_,record:v})=>[_.key==="action"?(y(),C(e(A),{key:0,actions:[{tooltip:e(r)("sys.util.edit"),icon:"clarity:note-edit-line",color:"#1890ff",disabled:!e(s)(["dev","edit"]),onClick:S.bind(null,v)},{icon:"ant-design:delete-outlined",color:"#ff4d4f",tooltip:e(r)("sys.util.delete"),disabled:!e(s)(["dev","del"]),popConfirm:{title:e(r)("sys.util.confirm"),placement:"left",confirm:w.bind(null,v)}},{icon:"ant-design:ellipsis-outlined",color:"#8c8c8c",tooltip:e(r)("dev.dev.detail"),disabled:!e(s)(["dev","edit"]),onClick:k.bind(null,v)}]},null,8,["actions"])):Z("",!0)]),_:1},8,["onRegister","searchInfo"]),d(W,{onRegister:e(u),onSuccess:D},null,8,["onRegister"]),d(j,{onRegister:e(x)},null,8,["onRegister"])]),_:1})}}});var je=T(te,[["__scopeId","data-v-d4460f42"]]);export{je as default};
