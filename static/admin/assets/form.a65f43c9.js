var b=Object.defineProperty,M=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var v=(t,o,e)=>o in t?b(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,l=(t,o)=>{for(var e in o||(o={}))C.call(o,e)&&v(t,e,o[e]);if(h)for(var e of h(o))R.call(o,e)&&v(t,e,o[e]);return t},f=(t,o)=>M(t,k(o));var g=(t,o,e)=>new Promise((c,r)=>{var m=i=>{try{n(e.next(i))}catch(p){r(p)}},d=i=>{try{n(e.throw(i))}catch(p){r(p)}},n=i=>i.done?c(i.value):Promise.resolve(i.value).then(m,d);n((e=e.apply(t,o)).next())});import{b as x,B as A}from"./index.4d884b9c.js";import{j as I,B as L}from"./useForm.ecd151fb.js";import{b as P}from"./index.a544321c.js";import{e as U}from"./index.data.b48e23c8.js";import{e as O,a as S}from"./index.3523ca22.js";import{d as V,k as _,e as $,u as a,$ as j,a6 as G,a8 as N,f as T,a7 as W}from"./vue.5d40fadb.js";import"./ui.83c3e48a.js";import"./useWindowSizeFn.1ba172e7.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css                *//* empty css                *//* empty css                */import"./index.fa00f44b.js";import"./download.14b6de08.js";import"./index.03b81760.js";import"./utils.79519c03.js";import"./gateway.23d4013c.js";import"./data.f933c358.js";const ue=V({__name:"form",emits:["success","register"],setup(t,{emit:o}){const{t:e}=P(),c=o,r=_(!0),m=_(""),[d,{setFieldsValue:n,resetFields:i,validate:p}]=I({labelWidth:120,baseColProps:{span:24},schemas:U,showActionButtonGroup:!1,actionColOptions:{span:23}}),[w,{setModalProps:u,closeModal:B}]=x(s=>g(this,null,function*(){i(),u({confirmLoading:!1}),r.value=!!(s!=null&&s.isUpdate),a(r)&&(m.value=s.record.id,n(l({},s.record)))})),y=$(()=>a(r)?e("sys.util.edit"):e("sys.util.add"));function F(){return g(this,null,function*(){try{const s=yield p();u({confirmLoading:!0}),a(r)?yield O(f(l({},s),{id:m.value})):yield S(s),B(),c("success",{isUpdate:a(r),values:f(l({},s),{id:m.value})})}finally{u({confirmLoading:!1})}})}return(s,q)=>(j(),G(a(A),W(s.$attrs,{onRegister:a(w),width:"700px",title:y.value,onOk:F}),{default:N(()=>[T(a(L),{onRegister:a(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ue as default};
