var C=Object.defineProperty,S=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(t,o,e)=>o in t?C(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))L.call(o,e)&&w(t,e,o[e]);if(v)for(var e of v(o))P.call(o,e)&&w(t,e,o[e]);return t},M=(t,o)=>S(t,k(o));var g=(t,o,e)=>new Promise((p,i)=>{var n=s=>{try{c(e.next(s))}catch(l){i(l)}},u=s=>{try{c(e.throw(s))}catch(l){i(l)}},c=s=>s.done?p(s.value):Promise.resolve(s.value).then(n,u);c((e=e.apply(t,o)).next())});import{b as I,B as j}from"./index.4d884b9c.js";import{j as x,B as O}from"./useForm.ecd151fb.js";import{b as V,h as $}from"./index.a544321c.js";import{h as G,i as N,j as T}from"./index.data.704af9fb.js";import{d as W,k as _,$ as q,a6 as z,a8 as D,f as E,u as r,a7 as H}from"./vue.5d40fadb.js";import"./ui.83c3e48a.js";import"./useWindowSizeFn.1ba172e7.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css                *//* empty css                *//* empty css                */import"./index.fa00f44b.js";import"./download.14b6de08.js";import"./index.03b81760.js";import"./utils.79519c03.js";const de=W({__name:"SetRoleModal",emits:["success","register"],setup(t,{emit:o}){const{t:e}=V(),p=o,i=_(""),n=_(""),[u,{setFieldsValue:c,resetFields:s,updateSchema:l,validate:b}]=x({labelWidth:100,baseColProps:{span:24},schemas:T,showActionButtonGroup:!1,actionColOptions:{span:23}}),[B,{setModalProps:d,closeModal:R}]=I(a=>g(this,null,function*(){s(),d({confirmLoading:!1,width:1e3}),i.value=a.record.id,n.value=a.record.code;const m=yield G({code:n.value}),F=m.data;a.record.data=m.have;let A=F.map(h=>({label:h.name,value:h.code}));l({field:"data",componentProps:{options:A}}),c(f({},a.record))}));function y(){return g(this,null,function*(){try{const a=yield b(),{createMessage:m}=$();d({confirmLoading:!0}),yield N({user:r(n),data:a.data}),m.success(e("system.account.tab.roleSuccess")),R(),p("success",{values:M(f({},a),{id:i.value})})}finally{d({confirmLoading:!1})}})}return(a,m)=>(q(),z(r(j),H(a.$attrs,{onRegister:r(B),title:r(e)("system.account.role"),onOk:y}),{default:D(()=>[E(r(O),{onRegister:r(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{de as default};
