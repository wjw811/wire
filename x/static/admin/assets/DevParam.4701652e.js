var W=Object.defineProperty,$=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var w=(t,a,e)=>a in t?W(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,_=(t,a)=>{for(var e in a||(a={}))J.call(a,e)&&w(t,e,a[e]);if(S)for(var e of S(a))K.call(a,e)&&w(t,e,a[e]);return t},A=(t,a)=>$(t,H(a));var x=(t,a,e)=>new Promise((v,g)=>{var r=n=>{try{d(e.next(n))}catch(f){g(f)}},o=n=>{try{d(e.throw(n))}catch(f){g(f)}},d=n=>n.done?v(n.value):Promise.resolve(n.value).then(r,o);d((e=e.apply(t,a)).next())});import{b as Q,h as U}from"./index.69a4dfca.js";import{b as X,B as Y}from"./index.3a1d8258.js";import{j as Z,B as ee}from"./useForm.d0703219.js";import{c as ae,s as te}from"./index.cac8beb7.js";import{i as oe}from"./index.35535828.js";import{d as se,k as h,a1 as B,a7 as re,a9 as k,f as I,u,E as R,a4 as s,a2 as T,a3 as c,V as E,a8 as ne}from"./vue.2e68d871.js";import{a8 as ie}from"./ui.5d3da833.js";import"./utils.93213dc9.js";import"./table.68230543.js";import"./useWindowSizeFn.d3b17bbd.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.e662be6d.js";import"./download.20060076.js";import"./index.8ca31aa0.js";const le={key:0},de={style:{"margin-bottom":"12px","font-size":"12px",color:"var(--text-color-secondary, #666)"}},ce={key:0,style:{"margin-left":"8px"}},me={style:{display:"grid","grid-template-columns":"repeat(3, minmax(0, 1fr))",gap:"8px","margin-bottom":"12px"}},Re=se({__name:"DevParam",emits:["success","register"],setup(t,{emit:a}){const{t:e}=Q(),{createMessage:v}=U(),g=a,r=h({}),o=h(null),d=h(""),n=[{field:"cmd",label:e("routes.dashboard.dash.paramCmd"),component:"InputNumber",required:!0,componentProps:()=>({min:2,max:1e3,precision:0})},{field:"val",label:e("routes.dashboard.dash.paramVal"),component:"InputNumber",required:!0,componentProps:()=>({min:0,max:65535,precision:0})}],[f,{setFieldsValue:C,resetFields:L,validate:q,getFieldsValue:D}]=Z({labelWidth:120,baseColProps:{span:24},schemas:n,showActionButtonGroup:!1,actionColOptions:{span:23}}),[O,{setModalProps:y,closeModal:j}]=X(i=>x(this,null,function*(){r.value=i.record,L(),y({confirmLoading:!1,title:e("routes.dashboard.dash.setting")+" - "+r.value.name}),C(_({},i.record));try{const m=yield oe({id:r.value.id}),p=(m==null?void 0:m.base)||{},l=(p==null?void 0:p.history)||{};o.value=(l==null?void 0:l.content)||null,d.value=(l==null?void 0:l.created)||""}catch(m){o.value=null,d.value=""}})),b=h(!1);function z(){const i=D();if(!i.cmd){v.error(e("routes.dashboard.dash.syncCmdError"));return}b.value=!0,ae({id:r.value.id,cmd:i.cmd,mode:"syn"}).then(()=>{setTimeout(()=>{te({id:r.value.id}).then(m=>{C({val:m.val}),v.success(e("routes.dashboard.dash.syncSuccess"))})},1500)}),setTimeout(()=>{b.value=!1},2e3)}function G(){return x(this,null,function*(){try{const i=yield q();y({confirmLoading:!0}),j(),g("success",{values:A(_({},i),{id:r.value.id})})}finally{y({confirmLoading:!1})}})}return(i,m)=>(B(),re(u(Y),ne(i.$attrs,{onRegister:u(O),onOk:G}),{centerFooter:k(()=>[I(u(ie),{loading:b.value,onClick:z},{default:k(()=>[R(s(u(e)("sys.util.syncParam")),1)]),_:1},8,["loading"])]),default:k(()=>{var p,l,F,V,M,P,N;return[o.value?(B(),T("div",le,[c("div",de,[R(s(u(e)("routes.dashboard.dash.setting"))+" - "+s((p=r.value)==null?void 0:p.name)+" ",1),d.value?(B(),T("span",ce,"( "+s(d.value)+" )",1)):E("",!0)]),c("div",me,[c("div",null,"mode: "+s((l=o.value.mode)!=null?l:"-"),1),c("div",null,"f01: "+s((F=o.value.f01)!=null?F:"-"),1),c("div",null,"f02: "+s((V=o.value.f02)!=null?V:"-"),1),c("div",null,"f03: "+s((M=o.value.f03)!=null?M:"-"),1),c("div",null,"f04: "+s((P=o.value.f04)!=null?P:"-"),1),c("div",null,"f05: "+s((N=o.value.f05)!=null?N:"-"),1)])])):E("",!0),I(u(ee),{onRegister:u(f)},null,8,["onRegister"])]}),_:1},16,["onRegister"]))}});export{Re as default};
