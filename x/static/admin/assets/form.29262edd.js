var B=Object.defineProperty,S=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var F=(e,a,t)=>a in e?B(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,p=(e,a)=>{for(var t in a||(a={}))k.call(a,t)&&F(e,t,a[t]);if(v)for(var t of v(a))A.call(a,t)&&F(e,t,a[t]);return e},g=(e,a)=>S(e,C(a));var w=(e,a,t)=>new Promise((c,s)=>{var l=o=>{try{d(t.next(o))}catch(u){s(u)}},m=o=>{try{d(t.throw(o))}catch(u){s(u)}},d=o=>o.done?c(o.value):Promise.resolve(o.value).then(l,m);d((t=t.apply(e,a)).next())});import{b as M,B as R}from"./index.3a1d8258.js";import{j as D,B as E}from"./useForm.d0703219.js";import{b as h}from"./index.69a4dfca.js";import{k as O}from"./data.71aa74fd.js";import{o as I}from"./fireware.963018b7.js";import{e as j,b as L}from"./gateway.2a62e783.js";import{d as T,k as y,e as U,u as n,a1 as q,a7 as N,a9 as V,f as z,a8 as G}from"./vue.2e68d871.js";const{t:i}=h(),ae=[{title:i("dev.gateway.name"),dataIndex:"name",width:150},{title:i("dev.gateway.serial"),dataIndex:"serial",width:200},{title:"\u5C40\u57DF\u7F51IP",dataIndex:"local_ip",width:150},{title:i("dev.gateway.addr"),dataIndex:"addr",align:"left",width:200},{title:i("dev.gateway.num"),dataIndex:"num",width:200,customRender:({record:e})=>e.dev.length},{title:i("dev.gateway.state"),dataIndex:"state",width:120,customRender:({record:e})=>{var a;return(a=O.devState.find(t=>t.k===e.state))==null?void 0:a.v}},{title:i("dev.gateway.fireware"),dataIndex:"fireware",width:120},{title:i("dev.gateway.upgrade"),dataIndex:"upgradeText",width:120,customRender:({record:e})=>e.fid?e.upgrade===0?i("sys.util.upgradeNone"):e.upgrade===-1?i("sys.util.upgradeComplete"):i("sys.util.upgradeInprogress"):"-"}],ie=[{field:"name",label:i("dev.gateway.name"),component:"Input",colProps:{span:6}},{field:"fid",label:i("dev.gateway.fireware"),component:"ApiSelect",colProps:{span:6},componentProps:()=>({api:I,showSearch:!0,optionFilterProp:"pinyin",resultField:"items",labelField:"name",valueField:"id"})}],W=[{field:"name",label:i("dev.gateway.name"),component:"Input",required:!0},{field:"serial",label:i("dev.gateway.serial"),component:"Input",required:!0},{field:"local_ip",label:"\u5C40\u57DF\u7F51IP",component:"Input",componentProps:{placeholder:"\u4F8B\u5982: 192.168.2.10"},helpMessage:"\u7528\u4E8E\u76F4\u8FDE\u6A21\u5F0F\uFF0C\u586B\u5199\u8BBE\u5907\u5728\u5C40\u57DF\u7F51\u5185\u7684IP\u5730\u5740"},{field:"addr",label:i("dev.gateway.addr"),component:"Input"},{field:"fid",label:i("dev.gateway.fireware"),component:"ApiSelect",componentProps:()=>({api:I,showSearch:!0,optionFilterProp:"pinyin",resultField:"items",labelField:"name",valueField:"id"})}],$=T({__name:"form",emits:["success","register"],setup(e,{emit:a}){const{t}=h(),c=a,s=y(!0),l=y(""),[m,{setFieldsValue:d,resetFields:o,validate:u}]=D({labelWidth:120,baseColProps:{span:24},schemas:W,showActionButtonGroup:!1,actionColOptions:{span:23}}),[b,{setModalProps:f,closeModal:_}]=M(r=>w(this,null,function*(){o(),f({confirmLoading:!1}),s.value=!!(r!=null&&r.isUpdate),n(s)&&(l.value=r.record.id,d(p({},r.record)))})),P=U(()=>n(s)?t("sys.util.edit"):t("sys.util.add"));function x(){return w(this,null,function*(){try{const r=yield u();f({confirmLoading:!0}),n(s)?yield j(g(p({},r),{id:l.value})):yield L(r),_(),c("success",{isUpdate:n(s),values:g(p({},r),{id:l.value})})}finally{f({confirmLoading:!1})}})}return(r,H)=>(q(),N(n(R),G(r.$attrs,{onRegister:n(b),width:"700px",title:P.value,onOk:x}),{default:V(()=>[z(n(E),{onRegister:n(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var re=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{$ as _,ae as c,re as f,ie as s};
