var v=(u,t,e)=>new Promise((i,f)=>{var w=a=>{try{l(e.next(a))}catch(d){f(d)}},p=a=>{try{l(e.throw(a))}catch(d){f(d)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(w,p);l((e=e.apply(u,t)).next())});import{b as m}from"./index.69a4dfca.js";import{k as h}from"./vue.2e68d871.js";const{t:s}=m(),o=h([{title:s("routes.dashboard.dash.dev"),icon:"power|svg",value:20},{title:s("routes.dashboard.dash.gateway"),icon:"gateway|svg",value:2e4},{title:s("routes.dashboard.dash.warn"),icon:"warning|svg",value:8e3,cate:"warn"},{title:s("routes.dashboard.dash.pending"),icon:"pending|svg",value:5e3}]),b=h([{title:s("routes.dashboard.dash.dev"),warn:!1,value:200}]),k=h({month:{x:[],ok:[],ng:[]},year:{x:[],ok:[],ng:[]}});let n=null,r=!1;function c(){return window.location.hash.includes("dashboard")}function x(){r=!0}function L(){r=!1}function g(){n||(n=setInterval(()=>v(this,null,function*(){if(!(r||!c()))try{const t=yield(yield fetch("/admin/dash")).json();if(t.code===0&&t.result){const{total:e,info:i}=t.result;o.value[0].value=e.dev,o.value[1].value=e.gateway,o.value[2].value=e.warning,o.value[3].value=e.pending,b.value=i}}catch(u){}}),3e3))}function y(){n&&(clearInterval(n),n=null),r=!1}window.addEventListener("hashchange",()=>{c()?g():y()});setTimeout(()=>{c()&&g()},5e3);export{b as d,o as g,k as m,x as p,L as r};
